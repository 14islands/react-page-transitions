var t=require("zustand/vanilla"),n=require("zustand"),e=require("react"),o=require("react-transition-group"),i=require("react/jsx-runtime");function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r,s=/*#__PURE__*/a(t),u=/*#__PURE__*/a(n);exports.TransitionState=void 0,(r=exports.TransitionState||(exports.TransitionState={})).SUSPENDED="suspended",r.APPEAR="appear",r.APPEARING="appearing",r.APPEARED="appeared",r.EXIT="exit",r.EXITING="exiting",r.EXITED="exited",r.ENTER="enter",r.ENTERING="entering",r.ENTERED="entered";var c=s.default(function(t){return{transitionStateTo:exports.TransitionState.SUSPENDED,transitionStateFrom:exports.TransitionState.SUSPENDED,transitionConfig:null,exitDone:function(){},enterDone:function(){},from:null,to:null,data:null,onEnteringCount:0,onExitingCount:0,applyTransitionConfig:function(){return t(function(t){var n;return{data:null==(n=t.transitionConfig)?void 0:n.data,transitionConfig:null}})},suspendedRoute:null}}),d=u.default(c),f=/*#__PURE__*/e.createContext("both");function E(){return E=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},E.apply(this,arguments)}function S(t){var n=t.replace(/\//g,"-");return n.startsWith("-")?n.substring(1):n}var l=["children","pathname","className","timeout","detectAnimationEnd","detectTransitionEnd"],g=function(t){var n=t.pathname,o=t.className,a=!c.getState().from;return e.useEffect(function(){return c.setState({suspendedRoute:n}),function(){c.setState({suspendedRoute:null})}},[]),/*#__PURE__*/i.jsx("div",{className:o+" "+o+"-"+S(n)+" "+o+"-"+(a?"appear":"enter")+"-suspended"})};function p(t){var n=t.children,a=t.pathname,r=t.className,s=t.timeout,u=t.detectAnimationEnd,d=t.detectTransitionEnd,p=function(t,n){if(null==t)return{};var e,o,i={},a=Object.keys(t);for(o=0;o<a.length;o++)n.indexOf(e=a[o])>=0||(i[e]=t[e]);return i}(t,l),x=e.useRef(null);/*#__PURE__*/return i.jsx(e.Suspense,{fallback:/*#__PURE__*/i.jsx(g,{pathname:a,className:r}),children:/*#__PURE__*/i.jsx(o.CSSTransition,E({nodeRef:x,addEndListener:function(t){if(x.current){var n=a===c.getState().to,e=a===c.getState().from;(n&&0===c.getState().onEnteringCount||e&&0===c.getState().onExitingCount)&&(u&&x.current.addEventListener("animationend",t,!1),d&&x.current.addEventListener("transitionend",t,!1)),n?c.setState({enterDone:t}):e&&c.setState({exitDone:t})}},timeout:s,classNames:r,appear:!0,unmountOnExit:!0},p,{onEnter:function(t){c.setState({transitionStateTo:t?exports.TransitionState.APPEAR:exports.TransitionState.ENTER}),p.onEnter&&p.onEnter()},onEntering:function(t){c.setState({transitionStateTo:t?exports.TransitionState.APPEARING:exports.TransitionState.ENTERING}),p.onEntering&&p.onEntering()},onEntered:function(t){c.setState({transitionStateTo:t?exports.TransitionState.APPEARED:exports.TransitionState.ENTERED}),p.onEntered&&p.onEntered()},onExit:function(){c.setState({transitionStateFrom:exports.TransitionState.EXIT}),p.onExit&&p.onExit()},onExiting:function(){c.setState({transitionStateFrom:exports.TransitionState.EXITING}),p.onExiting&&p.onExiting()},onExited:function(){c.setState({transitionStateFrom:exports.TransitionState.EXITED}),p.onExited&&p.onExited()},children:/*#__PURE__*/i.jsx("div",{className:r+" "+r+"-"+S(a),ref:x,children:/*#__PURE__*/i.jsx(f.Provider,{value:a,children:n})})}),a)})}exports.PageTransitions=function(t){var n=t.children,a=t.mode,r=void 0===a?"out-in":a,s=t.className,u=void 0===s?"page":s,d=t.timeout,f=t.detectAnimationEnd,E=void 0===f||f,S=t.detectTransitionEnd,l=void 0===S||S,g=t.pageName;function x(){/*#__PURE__*/return i.jsx(p,{pathname:g,className:u,timeout:d,detectAnimationEnd:E,detectTransitionEnd:l,children:n},g)}e.useMemo(function(){c.getState().to=g,c.getState().transitionStateTo=exports.TransitionState.SUSPENDED,c.getState().transitionStateFrom=exports.TransitionState.SUSPENDED},[g]),e.useLayoutEffect(function(){return c.getState().applyTransitionConfig(),function(){c.setState({from:g})}},[g]);var m=e.useState(0),T=m[0],v=m[1];return e.useLayoutEffect(function(){var t=c.getState().suspendedRoute;t&&g!==t&&v(T+1)},[g,T,v]),/*#__PURE__*/i.jsx(e.Fragment,{children:"sync"===r?/*#__PURE__*/i.jsx(o.TransitionGroup,{component:null,appear:!0,enter:!0,exit:!0,children:x()}):function(t){/*#__PURE__*/return i.jsx(o.SwitchTransition,{mode:t,children:x()})}(r)},T)},exports.setPageTransitionData=function(t){c.setState({transitionConfig:{data:t}})},exports.usePageTransition=function(t){var n=void 0===t?{}:t,o=n.onAppear,i=n.onAppearing,a=n.onAppeared,r=n.onEnter,s=n.onEntering,u=n.onEntered,E=n.onExit,S=n.onExiting,l=e.useContext(f),g=d(function(t){return t.transitionStateTo}),p=d(function(t){return t.transitionStateFrom}),x=d(function(t){return t.enterDone}),m=d(function(t){return t.exitDone}),T=d(function(t){return t.from}),v=d(function(t){return t.to}),N=d(function(t){return t.data}),h=l===c.getState().to,D=l===c.getState().from;return e.useLayoutEffect(function(){return h&&s&&c.setState({onEnteringCount:c.getState().onEnteringCount+1}),function(){h&&s&&c.setState({onEnteringCount:c.getState().onEnteringCount-1})}},[h,s]),e.useLayoutEffect(function(){return D&&S&&c.setState({onExitingCount:c.getState().onExitingCount+1}),function(){D&&S&&c.setState({onExitingCount:c.getState().onExitingCount-1})}},[D,S]),e.useLayoutEffect(function(){h&&("appear"===g?null==o||o():"appearing"===g?null==i||i({done:x}):"appeared"===g?null==a||a():"enter"===g?null==r||r({from:c.getState().from}):"entering"===g?null==s||s({from:c.getState().from,to:c.getState().to,done:x,data:c.getState().data}):"entered"===g&&(null==u||u({from:c.getState().from})))},[g]),e.useLayoutEffect(function(){D&&("exit"===p?null==E||E({to:c.getState().to}):"exiting"===p&&(null==S||S({from:c.getState().from,to:c.getState().to,done:m,data:c.getState().data})))},[p]),"both"===l?{transitionStateTo:g,transitionStateFrom:p,from:T,to:v,data:N}:{transitionState:h?g:p,from:T,to:v,data:N}};
//# sourceMappingURL=pagetransitions.cjs.map
