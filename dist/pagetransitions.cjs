var t=require("zustand/vanilla"),n=require("zustand"),e=require("react"),o=require("react-transition-group"),i=require("react/jsx-runtime");function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r,s=/*#__PURE__*/a(t),u=/*#__PURE__*/a(n);exports.TransitionState=void 0,(r=exports.TransitionState||(exports.TransitionState={})).SUSPENDED="suspended",r.APPEAR="appear",r.APPEARING="appearing",r.APPEARED="appeared",r.EXIT="exit",r.EXITING="exiting",r.EXITED="exited",r.ENTER="enter",r.ENTERING="entering",r.ENTERED="entered";var d=s.default(function(t){return{transitionStateTo:exports.TransitionState.SUSPENDED,transitionStateFrom:exports.TransitionState.SUSPENDED,transitionConfig:null,exitDone:function(){},enterDone:function(){},from:null,to:null,data:null,onEnteringCount:0,onExitingCount:0,applyTransitionConfig:function(){return t(function(t){var n;return{data:null==(n=t.transitionConfig)?void 0:n.data,transitionConfig:null}})},suspendedRoute:null}}),c=u.default(d),E="undefined"!=typeof window?e.useLayoutEffect:e.useEffect,f=/*#__PURE__*/e.createContext("both");function S(){return S=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},S.apply(this,arguments)}function l(t){var n=t.replace(/\//g,"-");return n.startsWith("-")?n.substring(1):n}var p=["children","pathname","className","timeout","detectAnimationEnd","detectTransitionEnd"],g=function(t){var n=t.pathname,o=t.className,a=!d.getState().from;return e.useEffect(function(){return d.setState({suspendedRoute:n}),function(){d.setState({suspendedRoute:null})}},[]),/*#__PURE__*/i.jsx("div",{className:o+" "+o+"-"+l(n)+" "+o+"-"+(a?"appear":"enter")+"-suspended"})};function x(t){var n=t.children,a=t.pathname,r=t.className,s=t.timeout,u=t.detectAnimationEnd,c=t.detectTransitionEnd,E=function(t,n){if(null==t)return{};var e,o,i={},a=Object.keys(t);for(o=0;o<a.length;o++)n.indexOf(e=a[o])>=0||(i[e]=t[e]);return i}(t,p),x=e.useRef(null);/*#__PURE__*/return i.jsx(e.Suspense,{fallback:/*#__PURE__*/i.jsx(g,{pathname:a,className:r}),children:/*#__PURE__*/i.jsx(o.CSSTransition,S({nodeRef:x,addEndListener:function(t){if(x.current){var n=a===d.getState().to,e=a===d.getState().from;(n&&0===d.getState().onEnteringCount||e&&0===d.getState().onExitingCount)&&(u&&x.current.addEventListener("animationend",t,!1),c&&x.current.addEventListener("transitionend",t,!1)),n?d.setState({enterDone:t}):e&&d.setState({exitDone:t})}},timeout:s,classNames:r,appear:!0,unmountOnExit:!0},E,{onEnter:function(t){d.setState({transitionStateTo:t?exports.TransitionState.APPEAR:exports.TransitionState.ENTER}),E.onEnter&&E.onEnter()},onEntering:function(t){d.setState({transitionStateTo:t?exports.TransitionState.APPEARING:exports.TransitionState.ENTERING}),E.onEntering&&E.onEntering()},onEntered:function(t){d.setState({transitionStateTo:t?exports.TransitionState.APPEARED:exports.TransitionState.ENTERED}),E.onEntered&&E.onEntered()},onExit:function(){d.setState({transitionStateFrom:exports.TransitionState.EXIT}),E.onExit&&E.onExit()},onExiting:function(){d.setState({transitionStateFrom:exports.TransitionState.EXITING}),E.onExiting&&E.onExiting()},onExited:function(){d.setState({transitionStateFrom:exports.TransitionState.EXITED}),E.onExited&&E.onExited()},children:/*#__PURE__*/i.jsx("div",{className:r+" "+r+"-"+l(a),ref:x,children:/*#__PURE__*/i.jsx(f.Provider,{value:a,children:n})})}),a)})}exports.PageContext=f,exports.PageTransitions=function(t){var n=t.children,a=t.mode,r=void 0===a?"out-in":a,s=t.className,u=void 0===s?"page":s,c=t.timeout,f=t.detectAnimationEnd,S=void 0===f||f,l=t.detectTransitionEnd,p=void 0===l||l,g=t.pageName;function m(){/*#__PURE__*/return i.jsx(x,{pathname:g,className:u,timeout:c,detectAnimationEnd:S,detectTransitionEnd:p,children:n},g)}e.useMemo(function(){d.getState().to=g,d.getState().transitionStateTo=exports.TransitionState.SUSPENDED,d.getState().transitionStateFrom=exports.TransitionState.SUSPENDED},[g]),E(function(){return d.getState().applyTransitionConfig(),function(){d.setState({from:g})}},[g]);var T=e.useState(0),v=T[0],N=T[1];return E(function(){var t=d.getState().suspendedRoute;t&&g!==t&&N(v+1)},[g,v,N]),/*#__PURE__*/i.jsx(e.Fragment,{children:"sync"===r?/*#__PURE__*/i.jsx(o.TransitionGroup,{component:null,appear:!0,enter:!0,exit:!0,children:m()}):function(t){/*#__PURE__*/return i.jsx(o.SwitchTransition,{mode:t,children:m()})}(r)},v)},exports.setPageTransitionData=function(t){d.setState({transitionConfig:{data:t}})},exports.usePageTransition=function(t){var n=void 0===t?{}:t,o=n.onAppear,i=n.onAppearing,a=n.onAppeared,r=n.onEnter,s=n.onEntering,u=n.onEntered,S=n.onExit,l=n.onExiting,p=e.useContext(f),g=c(function(t){return t.transitionStateTo}),x=c(function(t){return t.transitionStateFrom}),m=c(function(t){return t.enterDone}),T=c(function(t){return t.exitDone}),v=c(function(t){return t.from}),N=c(function(t){return t.to}),h=c(function(t){return t.data}),D=p===d.getState().to,P=p===d.getState().from;return E(function(){return D&&s&&d.setState({onEnteringCount:d.getState().onEnteringCount+1}),function(){D&&s&&d.setState({onEnteringCount:d.getState().onEnteringCount-1})}},[D,s]),E(function(){return P&&l&&d.setState({onExitingCount:d.getState().onExitingCount+1}),function(){P&&l&&d.setState({onExitingCount:d.getState().onExitingCount-1})}},[P,l]),E(function(){D&&("appear"===g?null==o||o():"appearing"===g?null==i||i({done:m}):"appeared"===g?null==a||a():"enter"===g?null==r||r({from:d.getState().from}):"entering"===g?null==s||s({from:d.getState().from,to:d.getState().to,done:m,data:d.getState().data}):"entered"===g&&(null==u||u({from:d.getState().from})))},[g]),E(function(){P&&("exit"===x?null==S||S({to:d.getState().to}):"exiting"===x&&(null==l||l({from:d.getState().from,to:d.getState().to,done:T,data:d.getState().data})))},[x]),"both"===p?{transitionStateTo:g,transitionStateFrom:x,from:v,to:N,data:h}:{transitionState:D?g:x,from:v,to:N,data:h}};
//# sourceMappingURL=pagetransitions.cjs.map
