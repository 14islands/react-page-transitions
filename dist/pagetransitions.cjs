var t=require("react"),n=require("zustand/vanilla"),e=require("zustand"),o=require("react-transition-group"),i=require("react/jsx-runtime");function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r,s=/*#__PURE__*/a(n),u=/*#__PURE__*/a(e);exports.TransitionState=void 0,(r=exports.TransitionState||(exports.TransitionState={})).SUSPENDED="suspended",r.APPEAR="appear",r.APPEARING="appearing",r.APPEARED="appeared",r.EXIT="exit",r.EXITING="exiting",r.EXITED="exited",r.ENTER="enter",r.ENTERING="entering",r.ENTERED="entered";var d=s.default(function(t){return{transitionStateTo:exports.TransitionState.SUSPENDED,transitionStateFrom:exports.TransitionState.SUSPENDED,transitionConfig:null,exitDone:function(){},enterDone:function(){},from:null,to:null,data:null,onEnteringCount:0,onExitingCount:0,applyTransitionConfig:function(){return t(function(t){var n;return{data:null==(n=t.transitionConfig)?void 0:n.data,transitionConfig:null}})},suspendedRoute:null}}),f=u.default(d),S="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,c=/*#__PURE__*/t.createContext("both");function E(){return E=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},E.apply(this,arguments)}function g(t){var n=t.replace(/\//g,"-");return n.startsWith("-")?n.substring(1):n}var p=["children","pathname","className","timeout","detectAnimationEnd","detectTransitionEnd"],l=function(n){var e=n.pathname,o=n.className,a=!d.getState().from;return t.useEffect(function(){return d.setState({suspendedRoute:e}),function(){d.setState({suspendedRoute:null})}},[]),/*#__PURE__*/i.jsx("div",{className:o+" "+o+"-"+g(e)+" "+o+"-"+(a?"appear":"enter")+"-suspended"})};function x(n){var e=n.children,a=n.pathname,r=n.className,s=n.timeout,u=n.detectAnimationEnd,f=n.detectTransitionEnd,S=function(t,n){if(null==t)return{};var e,o,i={},a=Object.keys(t);for(o=0;o<a.length;o++)n.indexOf(e=a[o])>=0||(i[e]=t[e]);return i}(n,p),x=t.useRef(null);/*#__PURE__*/return i.jsx(t.Suspense,{fallback:/*#__PURE__*/i.jsx(l,{pathname:a,className:r}),children:/*#__PURE__*/i.jsx(o.CSSTransition,E({nodeRef:x,addEndListener:function(t){if(x.current){var n=a===d.getState().to,e=a===d.getState().from;(n&&0===d.getState().onEnteringCount||e&&0===d.getState().onExitingCount)&&(u&&x.current.addEventListener("animationend",t,!1),f&&x.current.addEventListener("transitionend",t,!1)),n?d.setState({enterDone:t}):e&&d.setState({exitDone:t})}},timeout:s,classNames:r,appear:!0,unmountOnExit:!0},S,{onEnter:function(t){d.setState({transitionStateTo:t?exports.TransitionState.APPEAR:exports.TransitionState.ENTER}),S.onEnter&&S.onEnter()},onEntering:function(t){d.setState({transitionStateTo:t?exports.TransitionState.APPEARING:exports.TransitionState.ENTERING}),S.onEntering&&S.onEntering()},onEntered:function(t){d.setState({transitionStateTo:t?exports.TransitionState.APPEARED:exports.TransitionState.ENTERED}),S.onEntered&&S.onEntered()},onExit:function(){d.setState({transitionStateFrom:exports.TransitionState.EXIT}),S.onExit&&S.onExit()},onExiting:function(){d.setState({transitionStateFrom:exports.TransitionState.EXITING}),S.onExiting&&S.onExiting()},onExited:function(){d.setState({transitionStateFrom:exports.TransitionState.EXITED}),S.onExited&&S.onExited()},children:/*#__PURE__*/i.jsx("div",{className:r+" "+r+"-"+g(a),ref:x,children:/*#__PURE__*/i.jsx(c.Provider,{value:a,children:e})})}),a)})}exports.PageContext=c,exports.PageTransitions=function(n){var e=n.children,a=n.mode,r=void 0===a?"out-in":a,s=n.className,u=void 0===s?"page":s,f=n.timeout,c=n.detectAnimationEnd,E=void 0===c||c,g=n.detectTransitionEnd,p=void 0===g||g,l=n.pageName;function m(){/*#__PURE__*/return i.jsx(x,{pathname:l,className:u,timeout:f,detectAnimationEnd:E,detectTransitionEnd:p,children:e},l)}t.useMemo(function(){d.getState().to=l,d.getState().transitionStateTo=exports.TransitionState.SUSPENDED,d.getState().transitionStateFrom=exports.TransitionState.SUSPENDED},[l]),S(function(){return d.getState().applyTransitionConfig(),function(){d.setState({from:l})}},[l]);var T=t.useState(0),v=T[0],N=T[1];return S(function(){var t=d.getState().suspendedRoute;t&&l!==t&&N(v+1)},[l,v,N]),/*#__PURE__*/i.jsx(t.Fragment,{children:"sync"===r?/*#__PURE__*/i.jsx(o.TransitionGroup,{component:null,appear:!0,enter:!0,exit:!0,children:m()}):function(t){/*#__PURE__*/return i.jsx(o.SwitchTransition,{mode:t,children:m()})}(r)},v)},exports.setPageTransitionData=function(t){d.setState({transitionConfig:{data:t}})},exports.usePageTransition=function(n){var e=void 0===n?{}:n,o=e.onEnter,i=e.onEntering,a=e.onEntered,r=e.onExit,s=e.onExiting,u=t.useContext(c),E=f(function(t){return t.transitionStateTo}),g=f(function(t){return t.transitionStateFrom}),p=f(function(t){return t.enterDone}),l=f(function(t){return t.exitDone}),x=f(function(t){return t.from}),m=f(function(t){return t.to}),T=f(function(t){return t.data}),v=u===d.getState().to,N=u===d.getState().from;return S(function(){return v&&i&&d.setState({onEnteringCount:d.getState().onEnteringCount+1}),function(){v&&i&&d.setState({onEnteringCount:d.getState().onEnteringCount-1})}},[v,i]),S(function(){return N&&s&&d.setState({onExitingCount:d.getState().onExitingCount+1}),function(){N&&s&&d.setState({onExitingCount:d.getState().onExitingCount-1})}},[N,s]),t.useEffect(function(){v&&("appear"===E?null==o||o({isAppearing:!0,from:d.getState().from,to:d.getState().to}):"appearing"===E?null==i||i({isAppearing:!0,done:p,from:d.getState().from,to:d.getState().to}):"appeared"===E?null==a||a({isAppearing:!0,from:d.getState().from,to:d.getState().to}):"enter"===E?null==o||o({isAppearing:!1,from:d.getState().from,to:d.getState().to}):"entering"===E?null==i||i({isAppearing:!1,from:d.getState().from,to:d.getState().to,done:p,data:d.getState().data}):"entered"===E&&(null==a||a({isAppearing:!1,from:d.getState().from,to:d.getState().to})))},[E]),S(function(){N&&("exit"===g?null==r||r({to:d.getState().to}):"exiting"===g&&(null==s||s({from:d.getState().from,to:d.getState().to,done:l,data:d.getState().data})))},[g]),"both"===u?{transitionStateTo:E,transitionStateFrom:g,from:x,to:m,data:T}:{transitionState:v?E:g,from:x,to:m,data:T}};
//# sourceMappingURL=pagetransitions.cjs.map
