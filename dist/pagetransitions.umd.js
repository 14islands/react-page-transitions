!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("react"),require("zustand/vanilla"),require("zustand"),require("react-transition-group"),require("react/jsx-runtime")):"function"==typeof define&&define.amd?define(["exports","react","zustand/vanilla","zustand","react-transition-group","react/jsx-runtime"],n):n((t||self).reactPageTransitions={},t.react,t["zustand/vanilla"],t.zustand,t.reactTransitionGroup,t.jsx)}(this,function(t,n,e,i,a,o){function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u,s=/*#__PURE__*/r(e),d=/*#__PURE__*/r(i);t.TransitionState=void 0,(u=t.TransitionState||(t.TransitionState={})).SUSPENDED="suspended",u.APPEAR="appear",u.APPEARING="appearing",u.APPEARED="appeared",u.EXIT="exit",u.EXITING="exiting",u.EXITED="exited",u.ENTER="enter",u.ENTERING="entering",u.ENTERED="entered";var f=s.default(function(n){return{transitionStateTo:t.TransitionState.SUSPENDED,transitionStateFrom:t.TransitionState.SUSPENDED,transitionConfig:null,exitDone:function(){},enterDone:function(){},from:null,to:null,data:null,onEnteringCount:0,onExitingCount:0,applyTransitionConfig:function(){return n(function(t){var n;return{data:null==(n=t.transitionConfig)?void 0:n.data,transitionConfig:null}})},suspendedRoute:null}}),c=d.default(f),S="undefined"!=typeof window?n.useLayoutEffect:n.useEffect,E=/*#__PURE__*/n.createContext("both");function g(){return g=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},g.apply(this,arguments)}function l(t){var n=t.replace(/\//g,"-");return n.startsWith("-")?n.substring(1):n}var p=["children","pathname","className","timeout","detectAnimationEnd","detectTransitionEnd"],m=function(t){var e=t.pathname,i=t.className,a=!f.getState().from;return n.useEffect(function(){return f.setState({suspendedRoute:e}),function(){f.setState({suspendedRoute:null})}},[]),/*#__PURE__*/o.jsx("div",{className:i+" "+i+"-"+l(e)+" "+i+"-"+(a?"appear":"enter")+"-suspended"})};function T(e){var i=e.children,r=e.pathname,u=e.className,s=e.timeout,d=e.detectAnimationEnd,c=e.detectTransitionEnd,S=function(t,n){if(null==t)return{};var e,i,a={},o=Object.keys(t);for(i=0;i<o.length;i++)n.indexOf(e=o[i])>=0||(a[e]=t[e]);return a}(e,p),T=n.useRef(null);/*#__PURE__*/return o.jsx(n.Suspense,{fallback:/*#__PURE__*/o.jsx(m,{pathname:r,className:u}),children:/*#__PURE__*/o.jsx(a.CSSTransition,g({nodeRef:T,addEndListener:function(t){if(T.current){var n=r===f.getState().to,e=r===f.getState().from;(n&&0===f.getState().onEnteringCount||e&&0===f.getState().onExitingCount)&&(d&&T.current.addEventListener("animationend",t,!1),c&&T.current.addEventListener("transitionend",t,!1)),n?f.setState({enterDone:t}):e&&f.setState({exitDone:t})}},timeout:s,classNames:u,appear:!0,unmountOnExit:!0},S,{onEnter:function(n){f.setState({transitionStateTo:n?t.TransitionState.APPEAR:t.TransitionState.ENTER}),S.onEnter&&S.onEnter()},onEntering:function(n){f.setState({transitionStateTo:n?t.TransitionState.APPEARING:t.TransitionState.ENTERING}),S.onEntering&&S.onEntering()},onEntered:function(n){f.setState({transitionStateTo:n?t.TransitionState.APPEARED:t.TransitionState.ENTERED}),S.onEntered&&S.onEntered()},onExit:function(){f.setState({transitionStateFrom:t.TransitionState.EXIT}),S.onExit&&S.onExit()},onExiting:function(){f.setState({transitionStateFrom:t.TransitionState.EXITING}),S.onExiting&&S.onExiting()},onExited:function(){f.setState({transitionStateFrom:t.TransitionState.EXITED}),S.onExited&&S.onExited()},children:/*#__PURE__*/o.jsx("div",{className:u+" "+u+"-"+l(r),ref:T,children:/*#__PURE__*/o.jsx(E.Provider,{value:r,children:i})})}),r)})}t.PageContext=E,t.PageTransitions=function(e){var i=e.children,r=e.mode,u=void 0===r?"out-in":r,s=e.className,d=void 0===s?"page":s,c=e.timeout,E=e.detectAnimationEnd,g=void 0===E||E,l=e.detectTransitionEnd,p=void 0===l||l,m=e.pageName;function x(){/*#__PURE__*/return o.jsx(T,{pathname:m,className:d,timeout:c,detectAnimationEnd:g,detectTransitionEnd:p,children:i},m)}n.useMemo(function(){f.getState().to=m,f.getState().transitionStateTo=t.TransitionState.SUSPENDED,f.getState().transitionStateFrom=t.TransitionState.SUSPENDED},[m]),S(function(){return f.getState().applyTransitionConfig(),function(){f.setState({from:m})}},[m]);var v=n.useState(0),h=v[0],N=v[1];return S(function(){var t=f.getState().suspendedRoute;t&&m!==t&&N(h+1)},[m,h,N]),/*#__PURE__*/o.jsx(n.Fragment,{children:"sync"===u?/*#__PURE__*/o.jsx(a.TransitionGroup,{component:null,appear:!0,enter:!0,exit:!0,children:x()}):function(t){/*#__PURE__*/return o.jsx(a.SwitchTransition,{mode:t,children:x()})}(u)},h)},t.setPageTransitionData=function(t){f.setState({transitionConfig:{data:t}})},t.usePageTransition=function(t){var e=void 0===t?{}:t,i=e.onEnter,a=e.onEntering,o=e.onEntered,r=e.onExit,u=e.onExiting,s=n.useContext(E),d=c(function(t){return t.transitionStateTo}),g=c(function(t){return t.transitionStateFrom}),l=c(function(t){return t.enterDone}),p=c(function(t){return t.exitDone}),m=c(function(t){return t.from}),T=c(function(t){return t.to}),x=c(function(t){return t.data}),v=s===f.getState().to,h=s===f.getState().from;return S(function(){return v&&a&&f.setState({onEnteringCount:f.getState().onEnteringCount+1}),function(){v&&a&&f.setState({onEnteringCount:f.getState().onEnteringCount-1})}},[v,a]),S(function(){return h&&u&&f.setState({onExitingCount:f.getState().onExitingCount+1}),function(){h&&u&&f.setState({onExitingCount:f.getState().onExitingCount-1})}},[h,u]),n.useEffect(function(){v&&("appear"===d?null==i||i({isAppearing:!0,from:f.getState().from,to:f.getState().to}):"appearing"===d?null==a||a({isAppearing:!0,done:l,from:f.getState().from,to:f.getState().to}):"appeared"===d?null==o||o({isAppearing:!0,from:f.getState().from,to:f.getState().to}):"enter"===d?null==i||i({isAppearing:!1,from:f.getState().from,to:f.getState().to}):"entering"===d?null==a||a({isAppearing:!1,from:f.getState().from,to:f.getState().to,done:l,data:f.getState().data}):"entered"===d&&(null==o||o({isAppearing:!1,from:f.getState().from,to:f.getState().to})))},[d]),S(function(){h&&("exit"===g?null==r||r({to:f.getState().to}):"exiting"===g&&(null==u||u({from:f.getState().from,to:f.getState().to,done:p,data:f.getState().data})))},[g]),"both"===s?{transitionStateTo:d,transitionStateFrom:g,from:m,to:T,data:x}:{transitionState:v?d:g,from:m,to:T,data:x}}});
//# sourceMappingURL=pagetransitions.umd.js.map
