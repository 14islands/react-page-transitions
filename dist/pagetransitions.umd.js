!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("zustand/vanilla"),require("zustand"),require("react"),require("react-transition-group"),require("react/jsx-runtime")):"function"==typeof define&&define.amd?define(["exports","zustand/vanilla","zustand","react","react-transition-group","react/jsx-runtime"],n):n((t||self).reactPageTransitions={},t["zustand/vanilla"],t.zustand,t.react,t.reactTransitionGroup,t.jsx)}(this,function(t,n,e,i,a,o){function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u,s=/*#__PURE__*/r(n),d=/*#__PURE__*/r(e);t.TransitionState=void 0,(u=t.TransitionState||(t.TransitionState={})).SUSPENDED="suspended",u.APPEAR="appear",u.APPEARING="appearing",u.APPEARED="appeared",u.EXIT="exit",u.EXITING="exiting",u.EXITED="exited",u.ENTER="enter",u.ENTERING="entering",u.ENTERED="entered";var f=s.default(function(n){return{transitionStateTo:t.TransitionState.SUSPENDED,transitionStateFrom:t.TransitionState.SUSPENDED,transitionConfig:null,exitDone:function(){},enterDone:function(){},from:null,to:null,data:null,onEnteringCount:0,onExitingCount:0,applyTransitionConfig:function(){return n(function(t){var n;return{data:null==(n=t.transitionConfig)?void 0:n.data,transitionConfig:null}})},suspendedRoute:null}}),c=d.default(f),E=/*#__PURE__*/i.createContext("both");function S(){return S=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},S.apply(this,arguments)}function l(t){var n=t.replace(/\//g,"-");return n.startsWith("-")?n.substring(1):n}var g=["children","pathname","className","timeout","detectAnimationEnd","detectTransitionEnd"],p=function(t){var n=t.pathname,e=t.className,a=!f.getState().from;return i.useEffect(function(){return f.setState({suspendedRoute:n}),function(){f.setState({suspendedRoute:null})}},[]),/*#__PURE__*/o.jsx("div",{className:e+" "+e+"-"+l(n)+" "+e+"-"+(a?"appear":"enter")+"-suspended"})};function m(n){var e=n.children,r=n.pathname,u=n.className,s=n.timeout,d=n.detectAnimationEnd,c=n.detectTransitionEnd,m=function(t,n){if(null==t)return{};var e,i,a={},o=Object.keys(t);for(i=0;i<o.length;i++)n.indexOf(e=o[i])>=0||(a[e]=t[e]);return a}(n,g),T=i.useRef(null);/*#__PURE__*/return o.jsx(i.Suspense,{fallback:/*#__PURE__*/o.jsx(p,{pathname:r,className:u}),children:/*#__PURE__*/o.jsx(a.CSSTransition,S({nodeRef:T,addEndListener:function(t){if(T.current){var n=r===f.getState().to,e=r===f.getState().from;(n&&0===f.getState().onEnteringCount||e&&0===f.getState().onExitingCount)&&(d&&T.current.addEventListener("animationend",t,!1),c&&T.current.addEventListener("transitionend",t,!1)),n?f.setState({enterDone:t}):e&&f.setState({exitDone:t})}},timeout:s,classNames:u,appear:!0,unmountOnExit:!0},m,{onEnter:function(n){f.setState({transitionStateTo:n?t.TransitionState.APPEAR:t.TransitionState.ENTER}),m.onEnter&&m.onEnter()},onEntering:function(n){f.setState({transitionStateTo:n?t.TransitionState.APPEARING:t.TransitionState.ENTERING}),m.onEntering&&m.onEntering()},onEntered:function(n){f.setState({transitionStateTo:n?t.TransitionState.APPEARED:t.TransitionState.ENTERED}),m.onEntered&&m.onEntered()},onExit:function(){f.setState({transitionStateFrom:t.TransitionState.EXIT}),m.onExit&&m.onExit()},onExiting:function(){f.setState({transitionStateFrom:t.TransitionState.EXITING}),m.onExiting&&m.onExiting()},onExited:function(){f.setState({transitionStateFrom:t.TransitionState.EXITED}),m.onExited&&m.onExited()},children:/*#__PURE__*/o.jsx("div",{className:u+" "+u+"-"+l(r),ref:T,children:/*#__PURE__*/o.jsx(E.Provider,{value:r,children:e})})}),r)})}t.PageContext=E,t.PageTransitions=function(n){var e=n.children,r=n.mode,u=void 0===r?"out-in":r,s=n.className,d=void 0===s?"page":s,c=n.timeout,E=n.detectAnimationEnd,S=void 0===E||E,l=n.detectTransitionEnd,g=void 0===l||l,p=n.pageName;function T(){/*#__PURE__*/return o.jsx(m,{pathname:p,className:d,timeout:c,detectAnimationEnd:S,detectTransitionEnd:g,children:e},p)}i.useMemo(function(){f.getState().to=p,f.getState().transitionStateTo=t.TransitionState.SUSPENDED,f.getState().transitionStateFrom=t.TransitionState.SUSPENDED},[p]),i.useLayoutEffect(function(){return f.getState().applyTransitionConfig(),function(){f.setState({from:p})}},[p]);var x=i.useState(0),v=x[0],h=x[1];return i.useLayoutEffect(function(){var t=f.getState().suspendedRoute;t&&p!==t&&h(v+1)},[p,v,h]),/*#__PURE__*/o.jsx(i.Fragment,{children:"sync"===u?/*#__PURE__*/o.jsx(a.TransitionGroup,{component:null,appear:!0,enter:!0,exit:!0,children:T()}):function(t){/*#__PURE__*/return o.jsx(a.SwitchTransition,{mode:t,children:T()})}(u)},v)},t.setPageTransitionData=function(t){f.setState({transitionConfig:{data:t}})},t.usePageTransition=function(t){var n=void 0===t?{}:t,e=n.onAppear,a=n.onAppearing,o=n.onAppeared,r=n.onEnter,u=n.onEntering,s=n.onEntered,d=n.onExit,S=n.onExiting,l=i.useContext(E),g=c(function(t){return t.transitionStateTo}),p=c(function(t){return t.transitionStateFrom}),m=c(function(t){return t.enterDone}),T=c(function(t){return t.exitDone}),x=c(function(t){return t.from}),v=c(function(t){return t.to}),h=c(function(t){return t.data}),N=l===f.getState().to,P=l===f.getState().from;return i.useLayoutEffect(function(){return N&&u&&f.setState({onEnteringCount:f.getState().onEnteringCount+1}),function(){N&&u&&f.setState({onEnteringCount:f.getState().onEnteringCount-1})}},[N,u]),i.useLayoutEffect(function(){return P&&S&&f.setState({onExitingCount:f.getState().onExitingCount+1}),function(){P&&S&&f.setState({onExitingCount:f.getState().onExitingCount-1})}},[P,S]),i.useLayoutEffect(function(){N&&("appear"===g?null==e||e():"appearing"===g?null==a||a({done:m}):"appeared"===g?null==o||o():"enter"===g?null==r||r({from:f.getState().from}):"entering"===g?null==u||u({from:f.getState().from,to:f.getState().to,done:m,data:f.getState().data}):"entered"===g&&(null==s||s({from:f.getState().from})))},[g]),i.useLayoutEffect(function(){P&&("exit"===p?null==d||d({to:f.getState().to}):"exiting"===p&&(null==S||S({from:f.getState().from,to:f.getState().to,done:T,data:f.getState().data})))},[p]),"both"===l?{transitionStateTo:g,transitionStateFrom:p,from:x,to:v,data:h}:{transitionState:N?g:p,from:x,to:v,data:h}}});
//# sourceMappingURL=pagetransitions.umd.js.map
