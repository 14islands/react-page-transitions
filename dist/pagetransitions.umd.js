!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("zustand/vanilla"),require("zustand"),require("react"),require("react-transition-group"),require("react/jsx-runtime")):"function"==typeof define&&define.amd?define(["exports","zustand/vanilla","zustand","react","react-transition-group","react/jsx-runtime"],n):n((t||self).reactPageTransitions={},t["zustand/vanilla"],t.zustand,t.react,t.reactTransitionGroup,t.jsx)}(this,function(t,n,e,i,o,a){function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u,s=/*#__PURE__*/r(n),d=/*#__PURE__*/r(e);t.TransitionState=void 0,(u=t.TransitionState||(t.TransitionState={})).SUSPENDED="suspended",u.APPEAR="appear",u.APPEARING="appearing",u.APPEARED="appeared",u.EXIT="exit",u.EXITING="exiting",u.EXITED="exited",u.ENTER="enter",u.ENTERING="entering",u.ENTERED="entered";var f=s.default(function(n){return{transitionStateTo:t.TransitionState.SUSPENDED,transitionStateFrom:t.TransitionState.SUSPENDED,transitionConfig:null,exitDone:function(){},enterDone:function(){},from:null,to:null,data:null,onEnteringCount:0,onExitingCount:0,applyTransitionConfig:function(){return n(function(t){var n;return{data:null==(n=t.transitionConfig)?void 0:n.data,transitionConfig:null}})}}}),c=d.default(f),E=/*#__PURE__*/i.createContext("both");function S(){return S=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},S.apply(this,arguments)}function l(t){var n=t.replace(/\//g,"-");return n.startsWith("-")?n.substring(1):n}var g=["children","pathname","className","timeout","detectAnimationEnd","detectTransitionEnd"];function p(n){var e=n.children,r=n.pathname,u=n.className,s=n.timeout,d=n.detectAnimationEnd,c=n.detectTransitionEnd,p=function(t,n){if(null==t)return{};var e,i,o={},a=Object.keys(t);for(i=0;i<a.length;i++)n.indexOf(e=a[i])>=0||(o[e]=t[e]);return o}(n,g),m=i.useRef(null),T=!f.getState().from;/*#__PURE__*/return a.jsx(i.Suspense,{fallback:/*#__PURE__*/a.jsx(function(){/*#__PURE__*/return a.jsx("div",{className:u+" "+u+"-"+l(r)+" "+u+"-"+(T?"appear":"enter")+"-suspended"})},{}),children:/*#__PURE__*/a.jsx(o.CSSTransition,S({nodeRef:m,addEndListener:function(t){if(m.current){var n=r===f.getState().to,e=r===f.getState().from;(n&&0===f.getState().onEnteringCount||e&&0===f.getState().onExitingCount)&&(d&&m.current.addEventListener("animationend",t,!1),c&&m.current.addEventListener("transitionend",t,!1)),n?f.setState({enterDone:t}):e&&f.setState({exitDone:t})}},timeout:s,classNames:u,appear:!0,unmountOnExit:!0},p,{onEnter:function(n){f.setState({transitionStateTo:n?t.TransitionState.APPEAR:t.TransitionState.ENTER}),p.onEnter&&p.onEnter()},onEntering:function(n){f.setState({transitionStateTo:n?t.TransitionState.APPEARING:t.TransitionState.ENTERING}),p.onEntering&&p.onEntering()},onEntered:function(n){f.setState({transitionStateTo:n?t.TransitionState.APPEARED:t.TransitionState.ENTERED}),p.onEntered&&p.onEntered()},onExit:function(){f.setState({transitionStateFrom:t.TransitionState.EXIT}),p.onExit&&p.onExit()},onExiting:function(){f.setState({transitionStateFrom:t.TransitionState.EXITING}),p.onExiting&&p.onExiting()},onExited:function(){f.setState({transitionStateFrom:t.TransitionState.EXITED}),p.onExited&&p.onExited()},children:/*#__PURE__*/a.jsxs("div",{className:u+" "+u+"-"+l(r),ref:m,children:["export"," ",/*#__PURE__*/a.jsxs(E.Provider,{value:r,children:[e,"export"," "]})]})}),r)})}t.PageTransitions=function(n){var e=n.children,r=n.mode,u=void 0===r?"out-in":r,s=n.className,d=void 0===s?"page":s,c=n.timeout,E=n.detectAnimationEnd,S=void 0===E||E,l=n.detectTransitionEnd,g=void 0===l||l,m=n.pageName;function T(){/*#__PURE__*/return a.jsx(p,{pathname:m,className:d,timeout:c,detectAnimationEnd:S,detectTransitionEnd:g,children:e},m)}return i.useMemo(function(){f.getState().to=m,f.getState().transitionStateTo=t.TransitionState.SUSPENDED,f.getState().transitionStateFrom=t.TransitionState.SUSPENDED},[m]),i.useLayoutEffect(function(){return f.getState().applyTransitionConfig(),function(){f.setState({from:m})}},[m]),/*#__PURE__*/a.jsx(a.Fragment,{children:"sync"===u?/*#__PURE__*/a.jsx(o.TransitionGroup,{component:null,appear:!0,enter:!0,exit:!0,children:T()}):function(t){/*#__PURE__*/return a.jsx(o.SwitchTransition,{mode:t,children:T()})}(u)})},t.setPageTransitionData=function(t){f.setState({transitionConfig:{data:t}})},t.usePageTransition=function(t){var n=void 0===t?{}:t,e=n.onAppear,o=n.onAppearing,a=n.onAppeared,r=n.onEnter,u=n.onEntering,s=n.onEntered,d=n.onExit,S=n.onExiting,l=i.useContext(E),g=c(function(t){return t.transitionStateTo}),p=c(function(t){return t.transitionStateFrom}),m=c(function(t){return t.enterDone}),T=c(function(t){return t.exitDone}),x=c(function(t){return t.from}),v=c(function(t){return t.to}),h=c(function(t){return t.data}),N=l===f.getState().to,D=l===f.getState().from;return i.useLayoutEffect(function(){return N&&u&&f.setState({onEnteringCount:f.getState().onEnteringCount+1}),function(){N&&u&&f.setState({onEnteringCount:f.getState().onEnteringCount-1})}},[N,u]),i.useLayoutEffect(function(){return D&&S&&f.setState({onExitingCount:f.getState().onExitingCount+1}),function(){D&&S&&f.setState({onExitingCount:f.getState().onExitingCount-1})}},[D,S]),i.useLayoutEffect(function(){N&&("appear"===g?null==e||e():"appearing"===g?null==o||o({done:m}):"appeared"===g?null==a||a():"enter"===g?null==r||r({from:f.getState().from}):"entering"===g?null==u||u({from:f.getState().from,to:f.getState().to,done:m,data:f.getState().data}):"entered"===g&&(null==s||s({from:f.getState().from})))},[g]),i.useLayoutEffect(function(){D&&("exit"===p?null==d||d({to:f.getState().to}):"exiting"===p&&(null==S||S({from:f.getState().from,to:f.getState().to,done:T,data:f.getState().data})))},[p]),"both"===l?{transitionStateTo:g,transitionStateFrom:p,from:x,to:v,data:h}:{transitionState:N?g:p,from:x,to:v,data:h}}});
//# sourceMappingURL=pagetransitions.umd.js.map
