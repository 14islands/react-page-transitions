!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("zustand/vanilla"),require("zustand"),require("react"),require("react-transition-group"),require("react/jsx-runtime")):"function"==typeof define&&define.amd?define(["exports","zustand/vanilla","zustand","react","react-transition-group","react/jsx-runtime"],n):n((t||self).reactPageTransitions={},t["zustand/vanilla"],t.zustand,t.react,t.reactTransitionGroup,t.jsx)}(this,function(t,n,e,o,i,a){function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u,s=/*#__PURE__*/r(n),f=/*#__PURE__*/r(e);!function(t){t.SUSPENDED="suspended",t.APPEAR="appear",t.APPEARING="appearing",t.APPEARED="appeared",t.EXIT="exit",t.EXITING="exiting",t.EXITED="exited",t.ENTER="enter",t.ENTERING="entering",t.ENTERED="entered"}(u||(u={}));var c=s.default(function(t){return{transitionStateTo:u.SUSPENDED,transitionStateFrom:u.SUSPENDED,transitionConfig:null,exitDone:function(){},enterDone:function(){},from:null,to:null,data:null,onEnteringCount:0,onExitingCount:0,applyTransitionConfig:function(){return t(function(t){var n;return{data:null==(n=t.transitionConfig)?void 0:n.data,transitionConfig:null}})}}}),d=f.default(c),E=/*#__PURE__*/o.createContext("both");function l(){return l=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},l.apply(this,arguments)}function g(t){var n=t.replace(/\//g,"-");return n.startsWith("-")?n.substring(1):n}var S=["children","pathname","className","timeout","detectAnimationEnd","detectTransitionEnd"];function p(t){var n=t.children,e=t.pathname,r=t.className,s=t.timeout,f=t.detectAnimationEnd,d=t.detectTransitionEnd,p=function(t,n){if(null==t)return{};var e,o,i={},a=Object.keys(t);for(o=0;o<a.length;o++)n.indexOf(e=a[o])>=0||(i[e]=t[e]);return i}(t,S),m=o.useRef(null),x=!c.getState().from;/*#__PURE__*/return a.jsx(o.Suspense,{fallback:/*#__PURE__*/a.jsx(function(){/*#__PURE__*/return a.jsx("div",{className:r+" "+r+"-"+g(e)+" "+r+"-"+(x?"appear":"enter")+"-suspended"})},{}),children:/*#__PURE__*/a.jsx(i.CSSTransition,l({nodeRef:m,addEndListener:function(t){if(m.current){var n=e===c.getState().to,o=e===c.getState().from;(n&&0===c.getState().onEnteringCount||o&&0===c.getState().onExitingCount)&&(f&&m.current.addEventListener("animationend",t,!1),d&&m.current.addEventListener("transitionend",t,!1)),n?c.setState({enterDone:t}):o&&c.setState({exitDone:t})}},timeout:s,classNames:r,appear:!0,unmountOnExit:!0},p,{onEnter:function(t){c.setState({transitionStateTo:t?u.APPEAR:u.ENTER}),p.onEnter&&p.onEnter()},onEntering:function(t){c.setState({transitionStateTo:t?u.APPEARING:u.ENTERING}),p.onEntering&&p.onEntering()},onEntered:function(t){c.setState({transitionStateTo:t?u.APPEARED:u.ENTERED}),p.onEntered&&p.onEntered()},onExit:function(){c.setState({transitionStateFrom:u.EXIT}),p.onExit&&p.onExit()},onExiting:function(){c.setState({transitionStateFrom:u.EXITING}),p.onExiting&&p.onExiting()},onExited:function(){c.setState({transitionStateFrom:u.EXITED}),p.onExited&&p.onExited()},children:/*#__PURE__*/a.jsxs("div",{className:r+" "+r+"-"+g(e),ref:m,children:["export"," ",/*#__PURE__*/a.jsxs(E.Provider,{value:e,children:[n,"export"," "]})]})}),e)})}t.PageTransitions=function(t){var n=t.children,e=t.mode,r=void 0===e?"out-in":e,s=t.className,f=void 0===s?"page":s,d=t.timeout,E=t.detectAnimationEnd,l=void 0===E||E,g=t.detectTransitionEnd,S=void 0===g||g,m=t.pageName;function x(){/*#__PURE__*/return a.jsx(p,{pathname:m,className:f,timeout:d,detectAnimationEnd:l,detectTransitionEnd:S,children:n},m)}return o.useMemo(function(){c.getState().to=m,c.getState().transitionStateTo=u.SUSPENDED,c.getState().transitionStateFrom=u.SUSPENDED},[m]),o.useLayoutEffect(function(){return c.getState().applyTransitionConfig(),function(){c.setState({from:m})}},[m]),/*#__PURE__*/a.jsx(a.Fragment,{children:"sync"===r?/*#__PURE__*/a.jsx(i.TransitionGroup,{component:null,appear:!0,enter:!0,exit:!0,children:x()}):function(t){/*#__PURE__*/return a.jsx(i.SwitchTransition,{mode:t,children:x()})}(r)})},t.setPageTransitionData=function(t){c.setState({transitionConfig:{data:t}})},t.usePageTransition=function(t){var n=void 0===t?{}:t,e=n.onAppear,i=n.onAppearing,a=n.onAppeared,r=n.onEnter,u=n.onEntering,s=n.onEntered,f=n.onExit,l=n.onExiting,g=o.useContext(E),S=d(function(t){return t.transitionStateTo}),p=d(function(t){return t.transitionStateFrom}),m=d(function(t){return t.enterDone}),x=d(function(t){return t.exitDone}),T=d(function(t){return t.from}),v=d(function(t){return t.to}),h=d(function(t){return t.data}),N=g===c.getState().to,D=g===c.getState().from;return o.useLayoutEffect(function(){return N&&u&&c.setState({onEnteringCount:c.getState().onEnteringCount+1}),function(){N&&u&&c.setState({onEnteringCount:c.getState().onEnteringCount-1})}},[N,u]),o.useLayoutEffect(function(){return D&&l&&c.setState({onExitingCount:c.getState().onExitingCount+1}),function(){D&&l&&c.setState({onExitingCount:c.getState().onExitingCount-1})}},[D,l]),o.useLayoutEffect(function(){N&&("appear"===S?null==e||e():"appearing"===S?null==i||i({done:m}):"appeared"===S?null==a||a():"enter"===S?null==r||r({from:c.getState().from}):"entering"===S?null==u||u({from:c.getState().from,to:c.getState().to,done:m,data:c.getState().data}):"entered"===S&&(null==s||s({from:c.getState().from})))},[S]),o.useLayoutEffect(function(){D&&("exit"===p?null==f||f({to:c.getState().to}):"exiting"===p&&(null==l||l({from:c.getState().from,to:c.getState().to,done:x,data:c.getState().data})))},[p]),"both"===g?{transitionStateTo:S,transitionStateFrom:p,from:T,to:v,data:h}:{transitionState:N?S:p,from:T,to:v,data:h}}});
//# sourceMappingURL=pagetransitions.umd.js.map
