import t from"zustand/vanilla";import n from"zustand";import{createContext as e,useContext as o,useLayoutEffect as i,useRef as r,Suspense as a,useMemo as u}from"react";import{CSSTransition as E,TransitionGroup as d,SwitchTransition as c}from"react-transition-group";import{jsx as s,jsxs as f,Fragment as g}from"react/jsx-runtime";var l;!function(t){t.SUSPENDED="suspended",t.APPEAR="appear",t.APPEARING="appearing",t.APPEARED="appeared",t.EXIT="exit",t.EXITING="exiting",t.EXITED="exited",t.ENTER="enter",t.ENTERING="entering",t.ENTERED="entered"}(l||(l={}));var S=t(function(t){return{transitionStateTo:l.SUSPENDED,transitionStateFrom:l.SUSPENDED,transitionConfig:null,exitDone:function(){},enterDone:function(){},from:null,to:null,data:null,onEnteringCount:0,onExitingCount:0,applyTransitionConfig:function(){return t(function(t){var n;return{data:null==(n=t.transitionConfig)?void 0:n.data,transitionConfig:null}})}}}),m=n(S),p=/*#__PURE__*/e("both");function x(t){var n=void 0===t?{}:t,e=n.onAppear,r=n.onAppearing,a=n.onAppeared,u=n.onEnter,E=n.onEntering,d=n.onEntered,c=n.onExit,s=n.onExiting,f=o(p),g=m(function(t){return t.transitionStateTo}),l=m(function(t){return t.transitionStateFrom}),x=m(function(t){return t.enterDone}),v=m(function(t){return t.exitDone}),N=m(function(t){return t.from}),T=m(function(t){return t.to}),D=m(function(t){return t.data}),h=f===S.getState().to,A=f===S.getState().from;return i(function(){return h&&E&&S.setState({onEnteringCount:S.getState().onEnteringCount+1}),function(){h&&E&&S.setState({onEnteringCount:S.getState().onEnteringCount-1})}},[h,E]),i(function(){return A&&s&&S.setState({onExitingCount:S.getState().onExitingCount+1}),function(){A&&s&&S.setState({onExitingCount:S.getState().onExitingCount-1})}},[A,s]),i(function(){h&&("appear"===g?null==e||e():"appearing"===g?null==r||r({done:x}):"appeared"===g?null==a||a():"enter"===g?null==u||u({from:S.getState().from}):"entering"===g?null==E||E({from:S.getState().from,to:S.getState().to,done:x,data:S.getState().data}):"entered"===g&&(null==d||d({from:S.getState().from})))},[g]),i(function(){A&&("exit"===l?null==c||c({to:S.getState().to}):"exiting"===l&&(null==s||s({from:S.getState().from,to:S.getState().to,done:v,data:S.getState().data})))},[l]),"both"===f?{transitionStateTo:g,transitionStateFrom:l,from:N,to:T,data:D}:{transitionState:h?g:l,from:N,to:T,data:D}}function v(){return v=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},v.apply(this,arguments)}function N(t){var n=t.replace(/\//g,"-");return n.startsWith("-")?n.substring(1):n}var T=["children","pathname","className","timeout","detectAnimationEnd","detectTransitionEnd"];function D(t){var n=t.children,e=t.pathname,o=t.className,i=t.timeout,u=t.detectAnimationEnd,d=t.detectTransitionEnd,c=function(t,n){if(null==t)return{};var e,o,i={},r=Object.keys(t);for(o=0;o<r.length;o++)n.indexOf(e=r[o])>=0||(i[e]=t[e]);return i}(t,T),g=r(null),m=!S.getState().from;/*#__PURE__*/return s(a,{fallback:/*#__PURE__*/s(function(){/*#__PURE__*/return s("div",{className:o+" "+o+"-"+N(e)+" "+o+"-"+(m?"appear":"enter")+"-suspended"})},{}),children:/*#__PURE__*/s(E,v({nodeRef:g,addEndListener:function(t){if(g.current){var n=e===S.getState().to,o=e===S.getState().from;(n&&0===S.getState().onEnteringCount||o&&0===S.getState().onExitingCount)&&(u&&g.current.addEventListener("animationend",t,!1),d&&g.current.addEventListener("transitionend",t,!1)),n?S.setState({enterDone:t}):o&&S.setState({exitDone:t})}},timeout:i,classNames:o,appear:!0,unmountOnExit:!0},c,{onEnter:function(t){S.setState({transitionStateTo:t?l.APPEAR:l.ENTER}),c.onEnter&&c.onEnter()},onEntering:function(t){S.setState({transitionStateTo:t?l.APPEARING:l.ENTERING}),c.onEntering&&c.onEntering()},onEntered:function(t){S.setState({transitionStateTo:t?l.APPEARED:l.ENTERED}),c.onEntered&&c.onEntered()},onExit:function(){S.setState({transitionStateFrom:l.EXIT}),c.onExit&&c.onExit()},onExiting:function(){S.setState({transitionStateFrom:l.EXITING}),c.onExiting&&c.onExiting()},onExited:function(){S.setState({transitionStateFrom:l.EXITED}),c.onExited&&c.onExited()},children:/*#__PURE__*/f("div",{className:o+" "+o+"-"+N(e),ref:g,children:["export"," ",/*#__PURE__*/f(p.Provider,{value:e,children:[n,"export"," "]})]})}),e)})}function h(t){var n=t.children,e=t.mode,o=void 0===e?"out-in":e,r=t.className,a=void 0===r?"page":r,E=t.timeout,f=t.detectAnimationEnd,m=void 0===f||f,p=t.detectTransitionEnd,x=void 0===p||p,v=t.pageName;function N(){/*#__PURE__*/return s(D,{pathname:v,className:a,timeout:E,detectAnimationEnd:m,detectTransitionEnd:x,children:n},v)}return u(function(){S.getState().to=v,S.getState().transitionStateTo=l.SUSPENDED,S.getState().transitionStateFrom=l.SUSPENDED},[v]),i(function(){return S.getState().applyTransitionConfig(),function(){S.setState({from:v})}},[v]),/*#__PURE__*/s(g,{children:"sync"===o?/*#__PURE__*/s(d,{component:null,appear:!0,enter:!0,exit:!0,children:N()}):function(t){/*#__PURE__*/return s(c,{mode:t,children:N()})}(o)})}function A(t){S.setState({transitionConfig:{data:t}})}export{h as PageTransitions,l as TransitionState,A as setPageTransitionData,x as usePageTransition};
//# sourceMappingURL=pagetransitions.module.js.map
